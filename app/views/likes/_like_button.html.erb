<% liked = current_user.likes.exists?(likeable: likeable) %>
<% like_count = Like.where(likeable: likeable).count %>

<%= button_to(
      liked ? unlike_likes_path(likeable_type: likeable.class.name, likeable_id: likeable.id)
            : likes_path(likeable_type: likeable.class.name, likeable_id: likeable.id),
      method: liked ? :delete : :post,
      data: { turbo_stream: true },
      class: "inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white #{liked ? 'text-red-600' : 'text-gray-600'} text-base font-medium cursor-pointer transform transition duration-150 ease-in-out hover:scale-105"
    ) do %>
  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
       viewBox="0 0 24 24"
       fill="<%= liked ? 'currentColor' : 'none' %>"
       stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
          d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.948 0-3.609 1.131-4.312 2.756C11.297 4.881 9.636 3.75 7.688 3.75 5.099 3.75 3 5.765 3 8.25c0 7.22 8.25 11.25 9 11.25s9-4.03 9-11.25z"/>
  </svg>
  <span><%= like_count %></span>
<% end %>
